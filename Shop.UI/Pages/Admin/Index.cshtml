@page
@model Shop.UI.Pages.Admin.Index

@{
}

<div id="app" class="main-body">
    <section class="middle-content">
            <div v-if="!editing" class="product-list">
                <table>
                    <tr>
                        <th>Id</th>
                        <th>Product</th>
                        <th>Description</th>
                        <th>Value</th>
                    </tr>
                    <tr v-for="(product, index) in products">
                        <td>{{product.id}}</td>
                        <td>{{product.name}}</td>
                        <td>{{product.description}}</td>
                        <td>{{product.value}}</td>
                        <td>
                            <a v-on:click="editProduct(product.id, index)">Edit</a>
                        </td>
                        <td>
                            <a v-on:click="deleteProduct(product.id, index)">Delete</a>
                        </td>
                    </tr>
                </table>
            </div>
            <div v-else class="product-form">
                <label class="product-label">Product Name:</label>
                <input v-model="productModel.name"/>
                <label class="product-label">Product Description:</label>
                <textarea v-model="productModel.description"></textarea>
                <label class="product-label">Product Value:</label>
                <input v-model="productModel.value"/>
                <button v-on:click="createProduct" type="submit" v-if="productModel.id === 0" class="form-button">Submit product</button>
                <button v-on:click="updateProduct" type="submit" v-else class="form-button">Update product</button>
                <button v-on:click="cancel" type="submit" class="form-button">Cancel</button>
            </div>
            <button v-if="!editing" v-on:click="editing = true; productModel.id = 0" class="form-button">Create new product</button>
        </section>
</div>

@section Scripts{
    <script src="~/js/Admin/products.js"></script>
}